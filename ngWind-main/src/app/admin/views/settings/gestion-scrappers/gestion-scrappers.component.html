<div [@pageTransition]>
  <h2 class="text-2xl font-bold mb-4">Gestion des Scrappers</h2>
  <button (click)="openForm()" class="btn btn-primary mb-4">Ajouter un Scrapper</button>

  <data-table
    [columnData]="columnData"
    [rowData]="rowData"
    [pageData]="pageData"
    [actions]="actions">
  </data-table>

  <!-- Scrapper Form Modal -->
  <div *ngIf="isFormVisible" class="modal" tabindex="-1" role="dialog" style="display: block;">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">{{ isEditing ? 'Modifier le Scraper' : 'Ajouter un Scraper' }}</h5>
          <button type="button" class="close" (click)="cancelEdit()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form (ngSubmit)="submitForm()">
            <div class="grid grid-cols-2 gap-4">
              <!-- Affiche le Username uniquement lors de l'ajout d'un nouveau scrapper -->
              <div *ngIf="!isEditing" class="form-group">
                <label for="username" class="form-label">Username</label>
                <input type="text" id="username" [(ngModel)]="scrapperData.username" name="username" class="form-control" required />
              </div>
              <div class="form-group">
                <label for="prenom" class="form-label">Prénom</label>
                <input type="text" id="prenom" [(ngModel)]="scrapperData.prenom" name="prenom" class="form-control" required />
              </div>
              <div class="form-group">
                <label for="nom" class="form-label">Nom</label>
                <input type="text" id="nom" [(ngModel)]="scrapperData.nom" name="nom" class="form-control" required />
              </div>
              <div class="form-group">
                <label for="email" class="form-label">Email</label>
                <input type="email" id="email" [(ngModel)]="scrapperData.email" name="email" class="form-control" required />
              </div>
              <div class="form-group">
                <label for="password" class="form-label">Mot de passe</label>
                <input type="password" id="password" [(ngModel)]="scrapperData.password" name="password" class="form-control" [required]="!isEditing" />
              </div>
              <div class="form-group">
                <label for="numTel" class="form-label">Numéro de Téléphone</label>
                <input type="text" id="numTel" [(ngModel)]="scrapperData.numTel" name="numTel" class="form-control" required />
              </div>
              <div class="form-group">
                <label for="localisation" class="form-label">Localisation</label>
                <input type="text" id="localisation" [(ngModel)]="scrapperData.localisation" name="localisation" class="form-control" required />
              </div>
              <!-- Les champs siteweb et etatConfirmation sont retirés -->
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-primary">{{ isEditing ? 'Mettre à jour' : 'Ajouter' }}</button>
              <button type="button" class="btn btn-secondary button-spacing" (click)="cancelEdit()">Annuler</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
